<!DOCTYPE html>
<html lang="pt-PT">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Quiz de Estudo - Sele√ß√£o de Conte√∫do</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0f172a; --card:#111827; --fg:#e5e7eb; --muted:#94a3b8;
    --accent:#22c55e; --border:#1f2937; --btn:#1e293b; --btn-hover:#243447;
  }
  @media (prefers-color-scheme: light){
    :root{ --bg:#f8fafc; --card:#ffffff; --fg:#0f172a; --muted:#475569; --border:#e2e8f0; --btn:#e2e8f0; --btn-hover:#cbd5e1; }
  }
  /* Kid-Friendly Theme */
  body[data-theme="kids"]{
    --bg:#fff8f0; --card:#ffffff; --fg:#2c3e50; --muted:#7f8c8d;
    --accent:#27ae60; --border:#e8dacc; --btn:#ecf0f1; --btn-hover:#dfe6e9;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    background:var(--bg);
    color:var(--fg);
    font:18px/1.6 'Nunito',system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:1rem;
    transition:background 0.3s, color 0.3s;
  }
  .container{
    max-width:800px;
    width:100%;
  }
  .header{
    text-align:center;
    margin-bottom:2rem;
  }
  h1{
    font-size:2.5rem;
    margin:0 0 0.5rem;
    background:linear-gradient(135deg,#06b6d4,#22c55e);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
  }
  .subtitle{
    color:var(--muted);
    font-size:1.1rem;
  }
  .section{
    margin-bottom:2.5rem;
  }
  .section-title{
    font-size:1.4rem;
    margin:0 0 1rem;
    color:var(--accent);
    letter-spacing:0.02em;
  }
  .content-list{
    display:flex;
    flex-direction:column;
    gap:1rem;
  }
  .content-card{
    background:var(--card);
    border:2px solid var(--border);
    border-radius:1.2rem;
    padding:1.8rem;
    cursor:pointer;
    transition:all 0.3s;
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:1rem;
    box-shadow:0 2px 8px rgba(0,0,0,0.1);
  }
  .content-card:hover{
    transform:translateY(-4px) scale(1.01);
    box-shadow:0 12px 24px rgba(0,0,0,0.3);
    border-color:var(--accent);
  }
  .content-info h2{
    margin:0 0 0.3rem;
    font-size:1.3rem;
  }
  .content-info p{
    margin:0;
    color:var(--muted);
    font-size:0.95rem;
  }
  .badge{
    background:var(--btn);
    padding:0.3rem 0.7rem;
    border-radius:0.5rem;
    font-size:0.85rem;
    color:var(--muted);
    border:1px solid var(--border);
  }
  .custom-section{
    margin-top:2rem;
    padding:1.5rem;
    background:var(--card);
    border:1px solid var(--border);
    border-radius:1rem;
  }
  .custom-section h3{
    margin:0 0 1rem;
    font-size:1.2rem;
  }
  .input-group{
    display:flex;
    gap:0.5rem;
    margin-bottom:0.8rem;
  }
  input[type="text"]{
    flex:1;
    background:var(--bg);
    color:var(--fg);
    border:1px solid var(--border);
    padding:0.7rem;
    border-radius:0.5rem;
    font-size:1rem;
  }
  button{
    background:linear-gradient(135deg,#2563eb,#06b6d4);
    color:white;
    border:none;
    padding:0.9rem 1.8rem;
    border-radius:1rem;
    cursor:pointer;
    font-size:1.05rem;
    font-weight:600;
    transition:transform 0.2s, box-shadow 0.2s;
    box-shadow:0 4px 12px rgba(0,0,0,0.15);
  }
  button:hover{
    transform:translateY(-2px) scale(1.02);
    box-shadow:0 6px 16px rgba(0,0,0,0.25);
  }
  button:active{
    transform:translateY(0) scale(0.98);
  }
  .small{
    font-size:0.9rem;
    color:var(--muted);
    margin-top:0.5rem;
  }
  .arrow{
    font-size:1.5rem;
    color:var(--accent);
  }
  @media (max-width: 600px){
    h1{ font-size:1.8rem; }
    .content-card{ flex-direction:column; align-items:flex-start; }
    .arrow{ display:none; }
  }

  /* Theme toggle button */
  .theme-toggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border: none;
    color: white;
    font-size: 1.8rem;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    z-index: 100;
    transition: transform 0.2s, box-shadow 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .theme-toggle:hover {
    transform: scale(1.1) rotate(10deg);
    box-shadow: 0 6px 16px rgba(0,0,0,0.4);
  }
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>üìö Quiz de Estudo</h1>
    <p class="subtitle">Selecione o conte√∫do que deseja estudar</p>
  </div>

  <div class="section">
    <h2 class="section-title">Portugu√™s 5.¬∫ ano</h2>
    <div class="content-list">
      <div class="content-card" onclick="loadQuiz('portugues-5o-oralidade.json')">
        <div class="content-info">
          <h2>Oralidade & Intera√ß√£o</h2>
          <p>Debates, escuta ativa e apresenta√ß√µes guiadas ‚Ä¢ 4 cart√µes ‚Ä¢ v1</p>
        </div>
        <div>
          <span class="badge">Portugu√™s</span>
          <span class="arrow">‚Üí</span>
        </div>
      </div>

      <div class="content-card" onclick="loadQuiz('portugues-5o-leitura.json')">
        <div class="content-info">
          <h2>Leitura & Educa√ß√£o Liter√°ria</h2>
          <p>Estrat√©gias de compreens√£o, poesia e obras recomendadas ‚Ä¢ 4 cart√µes ‚Ä¢ v1</p>
        </div>
        <div>
          <span class="badge">Portugu√™s</span>
          <span class="arrow">‚Üí</span>
        </div>
      </div>

      <div class="content-card" onclick="loadQuiz('portugues-5o-escrita-gramatica.json')">
        <div class="content-info">
          <h2>Escrita & Gram√°tica</h2>
          <p>Processo de revis√£o, pontua√ß√£o e classes de palavras ‚Ä¢ 4 cart√µes ‚Ä¢ v1</p>
        </div>
        <div>
          <span class="badge">Portugu√™s</span>
          <span class="arrow">‚Üí</span>
        </div>
      </div>
    </div>
  </div>

  <div class="section">
    <h2 class="section-title">Hist√≥ria e Geografia de Portugal 5.¬∫ ano</h2>
    <div class="content-list">
      <div class="content-card" onclick="loadQuiz('hgp-5o-territorio.json')">
        <div class="content-info">
          <h2>Portugal: Territ√≥rio e Paisagens</h2>
          <p>Localiza√ß√£o, relevo e organiza√ß√£o administrativa ‚Ä¢ 4 cart√µes ‚Ä¢ v1</p>
        </div>
        <div>
          <span class="badge">HGP</span>
          <span class="arrow">‚Üí</span>
        </div>
      </div>

      <div class="content-card" onclick="loadQuiz('hgp-5o-formacao-reino.json')">
        <div class="content-info">
          <h2>Forma√ß√£o do Reino</h2>
          <p>Reconquista, Tratado de Zamora e primeiras Cortes ‚Ä¢ 4 cart√µes ‚Ä¢ v1</p>
        </div>
        <div>
          <span class="badge">HGP</span>
          <span class="arrow">‚Üí</span>
        </div>
      </div>

      <div class="content-card" onclick="loadQuiz('hgp-5o-expansao.json')">
        <div class="content-info">
          <h2>Expans√£o e Vida Quotidiana</h2>
          <p>Viagens oce√¢nicas, com√©rcio atl√¢ntico e Restaura√ß√£o ‚Ä¢ 4 cart√µes ‚Ä¢ v1</p>
        </div>
        <div>
          <span class="badge">HGP</span>
          <span class="arrow">‚Üí</span>
        </div>
      </div>
    </div>
  </div>

  <div class="section">
    <h2 class="section-title">Outros Conte√∫dos Dispon√≠veis</h2>
    <div class="content-list">
      <div class="content-card" onclick="loadQuiz('ciencias-u1-content.json')">
        <div class="content-info">
          <h2>Ci√™ncias Naturais 5.¬∫ ‚Äî Unidade 1</h2>
          <p>A Terra, planeta especial ‚Ä¢ 34 cart√µes ‚Ä¢ Vers√£o estrita v2</p>
        </div>
        <div>
          <span class="badge">Ci√™ncias</span>
          <span class="arrow">‚Üí</span>
        </div>
      </div>

      <div class="content-card" onclick="loadQuiz('example-historia.json')">
        <div class="content-info">
          <h2>Hist√≥ria 5.¬∫ ‚Äî Unidade 1</h2>
          <p>A Pen√≠nsula Ib√©rica na Europa e no Mundo ‚Ä¢ 10 cart√µes ‚Ä¢ Exemplo</p>
        </div>
        <div>
          <span class="badge">Hist√≥ria</span>
          <span class="arrow">‚Üí</span>
        </div>
      </div>

      <div class="content-card" onclick="loadQuiz('historia 5.json')">
        <div class="content-info">
          <h2>Hist√≥ria e Geografia de Portugal 5.¬∫ ‚Äî Unidade 1 (completa)</h2>
          <p>A presen√ßa romana, invas√£o mu√ßulmana e Reconquista Crist√£ ‚Ä¢ 22 cart√µes</p>
        </div>
        <div>
          <span class="badge">Hist√≥ria</span>
          <span class="arrow">‚Üí</span>
        </div>
      </div>

      <div class="content-card" onclick="loadQuiz('ingles.json')">
        <div class="content-info">
          <h2>Ingl√™s 5.¬∫ ‚Äî Unidade 1</h2>
          <p>Verbo to be, pronomes pessoais, vocabul√°rio e informa√ß√£o pessoal ‚Ä¢ 50 cart√µes ‚Ä¢ v1</p>
        </div>
        <div>
          <span class="badge">Ingl√™s</span>
          <span class="arrow">‚Üí</span>
        </div>
      </div>
    </div>
  </div>

  <div class="custom-section">
    <h3>üîß Carregar Ficheiro Personalizado</h3>
    
    <!-- File Upload -->
    <div style="margin-bottom: 1rem;">
      <input 
        type="file" 
        id="fileUpload" 
        accept=".json"
        style="display: none;"
      />
      <button onclick="document.getElementById('fileUpload').click()" style="width: 100%; margin-bottom: 0.5rem;">
        üìÅ Upload JSON File
      </button>
      <div id="uploadStatus" class="small" style="min-height: 1.5rem;"></div>
    </div>
    
    <!-- Text Input for Existing Files -->
    <div class="input-group">
      <input 
        type="text" 
        id="customPath" 
        placeholder="ou digite nome do ficheiro (ex: meu-conteudo.json)"
        value=""
      />
      <button onclick="loadCustomQuiz()">Carregar</button>
    </div>
    <div class="small">
      Escolha um ficheiro JSON do seu computador ou digite o nome de um ficheiro j√° no servidor.
      <br>Para criar novo conte√∫do, consulte o <code>README.md</code>.
    </div>
  </div>

  <div style="text-align:center; margin-top:2rem; color:var(--muted); font-size:0.9rem;">
    Sistema gen√©rico de quiz ‚Ä¢ Basta criar um JSON para adicionar novo conte√∫do
    <br>
    <a href="README.md" style="color:var(--accent); text-decoration:none;">üìñ Ver documenta√ß√£o</a>
  </div>
</div>

<!-- Theme Toggle Button -->
<button class="theme-toggle" id="themeToggle" title="Alternar tema para crian√ßas" aria-label="Alternar tema">üé®</button>

<script>
function loadQuiz(contentFile) {
  window.location.href = `quiz-template.html?content=${encodeURIComponent(contentFile)}`;
}

function loadCustomQuiz() {
  const path = document.getElementById('customPath').value.trim();
  if (!path) {
    alert('Por favor, insira o caminho do ficheiro JSON.');
    return;
  }
  if (!path.endsWith('.json')) {
    alert('O ficheiro deve ter extens√£o .json');
    return;
  }
  loadQuiz(path);
}

// File upload handler
document.getElementById('fileUpload').addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (!file) return;
  
  const status = document.getElementById('uploadStatus');
  status.textContent = '‚è≥ A carregar...';
  
  const reader = new FileReader();
  reader.onload = function(event) {
    try {
      const data = JSON.parse(event.target.result);
      
      // Validate JSON structure
      if (!data.metadata || !data.cards || !data.distractors || !data.trueFalse) {
        throw new Error('JSON inv√°lido: faltam campos obrigat√≥rios');
      }
      
      // Store in localStorage temporarily
      const timestamp = Date.now();
      const storageKey = `uploaded_quiz_${timestamp}`;
      localStorage.setItem(storageKey, event.target.result);
      
      status.innerHTML = `<span style="color: var(--accent);">‚úì File carregado!</span>`;
      
      // Show a button to load it
      setTimeout(() => {
        const loadBtn = document.createElement('button');
        loadBtn.textContent = '‚ñ∂Ô∏è Abrir Quiz Carregado';
        loadBtn.style.width = '100%';
        loadBtn.style.marginTop = '0.5rem';
        loadBtn.onclick = () => {
          // Pass the data to quiz-template via localStorage key
          window.location.href = `quiz-template.html?from_storage=${storageKey}`;
        };
        status.appendChild(loadBtn);
      }, 500);
      
    } catch (error) {
      status.innerHTML = `<span style="color: #ef4444;">‚úó Erro: ${error.message}</span>`;
    }
  };
  
  reader.onerror = function() {
    status.innerHTML = '<span style="color: #ef4444;">‚úó Erro ao ler ficheiro</span>';
  };
  
  reader.readAsText(file);
});

// Allow Enter key in input
document.getElementById('customPath').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') {
    loadCustomQuiz();
  }
});

// Theme toggle functionality
function toggleTheme() {
  const body = document.body;
  const currentTheme = body.getAttribute('data-theme');

  if (currentTheme === 'kids') {
    body.removeAttribute('data-theme');
    localStorage.setItem('theme', 'default');
  } else {
    body.setAttribute('data-theme', 'kids');
    localStorage.setItem('theme', 'kids');
  }
}

// Initialize theme on load
document.addEventListener('DOMContentLoaded', function() {
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'kids') {
    document.body.setAttribute('data-theme', 'kids');
  }

  document.getElementById('themeToggle').addEventListener('click', toggleTheme);
});
</script>
</body>
</html>
